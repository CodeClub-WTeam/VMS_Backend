# ============================================================
# VMS BACKEND - ENVIRONMENT CONFIGURATION TEMPLATE
# ============================================================
# This is a template file. Copy it to .env and update values.
#
# Setup: cp .env.example .env
# Then: Update all values below with your actual credentials
#
# ⚠️  Never commit .env to git (already in .gitignore)
# ============================================================

# ============================================================
# SERVER CONFIGURATION
# ============================================================

# Environment: development | test | production
NODE_ENV=development

# Server port (default: 3000)
# Note: Vercel overrides this in production
PORT=3000

# API version (used in routes: /api/v1/)
API_VERSION=v1

# ============================================================
# DATABASE CONFIGURATION - NEON POSTGRESQL
# ============================================================

# PRIMARY: Full connection URL (RECOMMENDED)
# Get from: https://console.neon.tech → Your Project → Connection Details
# Format: postgresql://username:password@host:port/database?sslmode=require
# ⚠️  Must include sslmode=require for Neon
POSTGRES_URL="postgresql://username:password@host/database?sslmode=require"

# FALLBACK: Individual components (if POSTGRES_URL not available)
POSTGRES_USER=your_db_user
POSTGRES_PASSWORD=your_db_password
POSTGRES_HOST=your-host.neon.tech
POSTGRES_DATABASE=your_database_name
POSTGRES_PORT=5432

# LEGACY: For backward compatibility (copy same values as above)
DB_HOST=your-host.neon.tech
DB_PORT=5432
DB_NAME=your_database_name
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_DIALECT=postgres

# Connection pool settings (defaults optimized for serverless)
DB_POOL_MAX=5
DB_POOL_MIN=0
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# ============================================================
# JWT CONFIGURATION
# ============================================================

# ⚠️  CRITICAL: JWT secret for token signing
# Requirements: Minimum 32 characters, random, unpredictable
# Generate: openssl rand -base64 32
# ⚠️  Use DIFFERENT secrets for dev/staging/production
JWT_SECRET=your_super_secret_jwt_key_change_in_production_min_32_chars_long

# Token expiration (examples: 15m, 1h, 24h, 7d, 30d)
# Recommendation: 1h for admin, 24h for residents
JWT_EXPIRES_IN=24h

# ============================================================
# CORS CONFIGURATION
# ============================================================

# Allowed origins (comma-separated, NO SPACES)
# Development: http://localhost:3000,http://localhost:3001
# Production: https://your-app.vercel.app,https://your-admin.vercel.app
# ⚠️  NEVER use * in production
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:8080

# ============================================================
# RATE LIMITING
# ============================================================

# Time window in milliseconds (default: 900000 = 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Max requests per IP per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================
# QR CODE CONFIGURATION
# ============================================================

# QR code size in pixels (100-500, default: 200)
QR_CODE_SIZE=200

# Error correction: L | M | Q | H (default: M)
# M = 15% error correction (recommended)
QR_CODE_ERROR_CORRECTION=M

# ============================================================
# LOGGING
# ============================================================

# Log level: error | warn | info | debug
# Development: debug | Production: error or warn
LOG_LEVEL=debug

# ============================================================
# OPTIONAL: EMAIL CONFIGURATION
# ============================================================
# Uncomment if enabling email notifications

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password

# ============================================================
# SETUP INSTRUCTIONS
# ============================================================
#
# 1. Copy this file: cp .env.example .env
# 2. Update POSTGRES_URL with your Neon database URL
# 3. Generate JWT_SECRET: openssl rand -base64 32
# 4. Update other values as needed
# 5. Run: npm install
# 6. Run: npm run migrate
# 7. Run: npm run seed
# 8. Run: npm run dev
#
# For Vercel deployment, see: DEPLOY_NOW.md
# ============================================================
